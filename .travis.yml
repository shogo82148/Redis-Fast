language: perl
perl:
  - "5.24"
  - "5.22"
  - "5.20"
  - "5.18"
  - "5.16"
  - "5.14"
  - "5.12"
  - "5.10"
os:
  - linux
  - osx
env:
  - REDIS_VERSION=4.0-rc2 TEST_LANG=en_US.UTF-8
  - REDIS_VERSION=3.2.6 TEST_LANG=en_US.UTF-8
  - REDIS_VERSION=2.8.24 TEST_LANG=en_US.UTF-8
  - REDIS_VERSION=3.2.6 TEST_LANG=ja_JP.UTF-8
branches:
  only:
  - master
install:
  - ./.travis-install.sh
cache:
  directories:
    - $HOME/travis-perl-helpers
    - $HOME/perl5
    - redis-$REDIS_VERSION
script:
  - source ~/perl5/perlbrew/etc/bashrc
  - source ~/travis-perl-helpers/init
  - perl -V
  - PATH=$PWD/redis-$REDIS_VERSION/src:$PATH redis-server --version
  - PATH=$PWD/redis-$REDIS_VERSION/src:$PATH LC_ALL=$TEST_LANG minil test --all
sudo: true
