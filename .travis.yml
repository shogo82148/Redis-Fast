language: perl
perl:
  - "5.24"
  - "5.22"
  - "5.20"
  - "5.18"
  - "5.16"
  - "5.14"
  - "5.12"
  - "5.10"
os:
  - linux
  - osx
env:
  - REDIS_VERSION=4.0-rc2 TEST_LANG=en_US.UTF-8
  - REDIS_VERSION=3.2.8 TEST_LANG=en_US.UTF-8
  - REDIS_VERSION=2.8.24 TEST_LANG=en_US.UTF-8
  - REDIS_VERSION=3.2.8 TEST_LANG=ja_JP.UTF-8
branches:
  only:
  - master
before_install:
  - ./.travis-install.sh
  - source "$HOME/perl5/perlbrew/etc/bashrc"
  - source "$HOME/travis-perl-helpers/init"
cache:
  directories:
    - $HOME/travis-perl-helpers
    - $HOME/perl5
    - redis-bin
script:
  - perl -V
  - PATH=$PWD/redis-bin:$PATH redis-server --version
  - PATH=$PWD/redis-bin:$PATH LC_ALL=$TEST_LANG minil test --all
sudo: true
